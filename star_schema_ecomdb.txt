CREATE TABLE customer_dim
(
 customer_key  varchar(50) NOT NULL,
 name          varchar(100) NOT NULL,
 contact_noint varchar(50) NOT NULL,
 nid           varchar(50) NOT NULL,
 CONSTRAINT PK_1 PRIMARY KEY ( customer_key )
);


CREATE TABLE item_dim
(
 item_key    varchar(50) NOT NULL,
 item_name   varchar(50) NOT NULL,
 description varchar(300) NOT NULL,
 unit_price  numeric NOT NULL,
 man_country varchar(50) NOT NULL,
 supplier    varchar(50) NOT NULL,
 unit        varchar(50) NOT NULL,
 CONSTRAINT PK_2 PRIMARY KEY ( item_key )
);

CREATE TABLE store_dim
(
 store_key varchar(50) NOT NULL,
 division  varchar(50) NOT NULL,
 district  varchar(50) NOT NULL,
 upazila   varchar(50) NOT NULL,
 CONSTRAINT PK_3 PRIMARY KEY ( store_key )
);

CREATE TABLE time_dim
(
 time_key varchar(50) NOT NULL,
 t_date   date NOT NULL,
 hour     int NOT NULL,
 day      int NOT NULL,
 week     varchar(50) NOT NULL,
 month    int NOT NULL,
 quarter  varchar(50) NOT NULL,
 year     int NOT NULL,
 CONSTRAINT PK_4 PRIMARY KEY ( time_key )
);

CREATE TABLE trans_dim
(
 payment_key varchar(50) NOT NULL,
 trans_type  varchar(50) NOT NULL,
 bank_name   varchar(100) NULL,
 CONSTRAINT PK_5 PRIMARY KEY ( payment_key )
);

CREATE TABLE fact_table
(
 store_key    varchar(50) NOT NULL,
 payment_key  varchar(50) NOT NULL,
 time_key     varchar(50) NOT NULL,
 item_key     varchar(50) NOT NULL,
 customer_key varchar(50) NOT NULL,
 quantity     numeric NOT NULL,
 unit         varchar(50) NOT NULL,
 unit_price   numeric NOT NULL,
 total_price  numeric NOT NULL,
 CONSTRAINT FK_1 FOREIGN KEY ( store_key ) REFERENCES store_dim ( store_key ),
 CONSTRAINT FK_2 FOREIGN KEY ( payment_key ) REFERENCES trans_dim ( payment_key ),
 CONSTRAINT FK_3 FOREIGN KEY ( time_key ) REFERENCES time_dim ( time_key ),
 CONSTRAINT FK_4 FOREIGN KEY ( item_key ) REFERENCES item_dim ( item_key ),
 CONSTRAINT FK_5 FOREIGN KEY ( customer_key ) REFERENCES customer_dim ( customer_key )
);

CREATE INDEX FK_1 ON fact_table
(
 store_key
);

CREATE INDEX FK_2 ON fact_table
(
 payment_key
);

CREATE INDEX FK_3 ON fact_table
(
 time_key
);

CREATE INDEX FK_4 ON fact_table
(
 item_key
);

CREATE INDEX FK_5 ON fact_table
(
 customer_key
);